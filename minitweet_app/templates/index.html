{% extends "base.html" %}


{% block content %}
<div class="container">
    {% if not(current_user.is_authenticated) %}
        <div class="alert alert-success text-center">
            <a class="close" title="Close" href="#" data-dismiss="alert">Ã—</a>
            <span class="msg">
                welcome to minitweet a twitter clone with minimal features
                <a href="{{ url_for('signup') }}"><span class="alert-link">signup now!</span></a>
            </span>
        </div>
    {% endif %}

    {% if request.path in ["/", '/posts', '/posts/newest'] %}
        {% set newest = 'active' %}
    {% elif request.path == "/posts/discover" %}
        {% set discover = 'active' %}
    {% endif %}


    <ul class="nav nav-tabs col-xs-12 col-md-8 col-md-offset-2">
        <li role="presentation" class='{{ newest }}'>
            <a href="{{ url_for('home') }}">
                <i class="fa fa-clock-o"></i> newest
            </a>
        </li>
        <li role="presentation" class="{{ discover }}">

            <a href="{{ url_for('discover') }}">
                <i class="fa fa-binoculars"></i> discover
            </a>
        </li>
    </ul>

    {% if posts.all()|length == 0 %}
        <div class="col-xs-12 col-md-8 col-md-offset-2">
            <h3>
                nothing to show here you may want to
                <a href="{{ url_for('discover') }}">Discover new posts</a>
                and follow other people to view their posts here
            </h3>
        </div>
    {% else %}
        <div class="posts">
            {% for post in posts %}
                <div class="post text-center col-xs-12 col-md-8 col-md-offset-2">
                    <div class="post-title">
                        <h1>{{ post.title }}</h1>
                    </div>

                    <div class="post-author">
                        <a href="/u/{{ post.author.name }}">
                            <img class="gravatar-img" src="{{ post.author.email | gravatar(size='40') }}" alt="user avatar">
                            <h5 style="display:inline-block">{{ post.author.name }}</h5>
                        </a>
                    </div>

                    <div class="post-body col-xs-12">
                        <!-- support old posts -->
                        {% if post.id <= 12 %}
                            {{ post.body | markdown }}
                        {% else %}
                            {{ post.body }}
                        {% endif %}
                    </div>
                    <div class="likes">
                        <i class="fa fa-2x fa-heart-o heart"></i>
                        <span class="likes-counting">0</span>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}
